---
title: '[리눅스] 네트워크 설정'
categories:
  - Server
  - Linux
tags:
  - Linux
  - CentOS
  - 네트워크
  - Network
date: 2022-12-14 11:41:21
thumbnail: /images/thumbnail/centos.png
---

리눅스 환경에서 **ifconfig** 를 이용하여 네트워크 설정하는 방법을 알아보겠습니다.

## ifconfig 란

TCP/IP를 사용하여 네트워크의 네트워크 인터페이스 매개변수를 구성 또는 표시합니다.

**ifconfig** 명령을 사용하여 네트워크 인터페이스에 주소를 지정하고 현재 네트워크 인터페이스 구성 정보를 구성 또는 표시할 수 있습니다.

## IP 주소 확인

옵션없이 ifconfig 명령어만 실행하면 서버에 할당된 IP 주소를 확인합니다.

```shell
$ ifconfig
enp5s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.19  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::d487:3f17:d845:654b  prefixlen 64  scopeid 0x20<link>
        ether 1c:1b:0d:7d:36:6f  txqueuelen 1000  (Ethernet)
        RX packets 11943615  bytes 5682003196 (5.2 GiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8140188  bytes 2132065829 (1.9 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
...
```

IPv4주소(inet), 서브넷마스트(netmask), 브로드캐스트주소(broadcast)가 표기되고 있고, MAC주소(ether)도 표시됩니다.

## 네트워크 설정

IP 주소, 서브넷마스크 주소, 브로드캐스트 주소를 모두 할당하려면 아래와 같이 모든 인수와 함께 ifconfig 명령을 사용하면 됩니다.

```shell
$ ifconfig [이더넷명] [주소] netmask [주소] broadcast [주소]
```

추가로 `up` 옵션을 추가하여 이더넷을 활성화합니다.

```shell
$ ifconfig [이더넷명] up
```

다음 예제는 eth0 에 IP 주소를 192.168.0.250, 서브넷마스크 주소를 255.255.255.0, 브로드캐스트 주소를 192.168.0.255 설정하고 활성화하는 명령어입니다.

```shell
$ ifconfig eth0 192.168.0.250 netmask 255.255.255.0 broadcast 192.168.0.255 up
```

위의 방법으로 설정을 하면 물리적으로 변경된 것이 아니라 시스템 메모리상에서 로딩된 리눅스 커널이 사용하고 있는 랜카드 드라이브의 네트워크 설정이 바뀌는 것입니다.
따라서 시스템을 재부팅하고 나면 설정이 사라집니다.

## 고정 네트워크 설정

IP 주소를 고정하기 위해 설정을 해야 합니다.

### /etc/sysconfig/network

시스템 전체에 대한 Global 한 기본 게이트웨이 주소 설정과 호스트네임, 네트워킹 연결 허용 여부를 설정합니다.

```shell
$ vi /etc/sysconfig/network

NETWORKING=yes
NETWORKING_IPV6=no
HOSTNAME=hgko.com
GATEWAY=192.168.0.1
```

### /etc/resolv.conf

네임서버 설정과 기본적으로 사용할 도메인명을 설정합니다. 호스트명만 지정하였을 경우에 호스트명을 search 항목에 지정하여 도메인명으로 사용합니다.

```shell
$ vi /etc/resolv.conf
```

```bash
# Generated by NetworkManager
search hgko.com
nameserver 168.126.63.1
nameserver 168.126.63.2
```

### /etc/sysconfig/network-script/

시스템에서 사용하는 모든 이더넷 설정파일은 `/etc/sysconfig/network-script/` 디렉토리에 존재합니다. 시스템에 설치되어 있는 기본 이더넷카드의 파일을 열고 고정 IP 부여를 위해 수정합니다.

```shell
$ vi /etc/sysconfig/network-script/ifcfg-eth0
```

```bash
# 장치명, 첫번째 이더넷카드
DEVICE=eth0
# IP 부여 방식 결정, static 은 고정IP
BOOTPROTO=static
# 이더넷카드의 MAC 주소
HWADDR=XX:XX:XX:XX:XX:XX
# 고유ID를 부여하는 것으로 자동으로 부여됨
UUID=XXXXXXX-XXX-XXX-XXX-XXXXXXX
# Ethernet 에 대한 설정
TYPE=Ethernet
# IP 주소 지정
IPADDR=192.168.0.250
# 서브넷마스크 지정
NETMASK=255.255.255.0
# 브로드캐스트 지정
BROADCAST=192.168.0.255
# 네트워크  지정
NETWORK=192.168.0.0
# 일반사용자의 eth0 제어 가능여부
USERCTL=no
# IPV6 사용여부
IPV6INIT=no
# 시스템 시작시 자동으로 활성화
ONBOOT=yes
```

### 설정 적용

시스템을 재부팅하거나 재부팅 하지 않고 변경사항을 적용하는 명령어를 입력합니다.

```shell
$ /etc/rc.d/init.d/network restart
```

또는

```shell
$ service network restart
```

## 참고

- https://www.ibm.com/docs/ko/aix/7.2?topic=i-ifconfig-command
