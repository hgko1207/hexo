---
title: [MyBatis] 페이징 처리
categories:
  - Programming
  - Spring Framework
tags:
  - MyBatis
date: 2021-09-17 21:44:53
thumbnail: /images/thumbnail/mybatis.png
---

웹 개발 시 페이징 처리는 필수입니다. MyBatis 를 사용하여 페이징 처리를 하였습니다.

데이터베이스는 `Oracle` 을 사용하였습니다.

# 기본 페이징

## Class 생성

```java
// Pagination.java
@Data
public class Pagination {

  /** 페이지 번호 */
  private int pageNo;

  /** 한 페이지당 데이터 수 */
  private int amount;
}
```

```java
// Notice.java
@Data
public class Notice {

  /** 작성사용자ID */
  private String userId;

  /** 작성사용자명 */
  private String userName;

  /** 제목 */
  private String title;

  /** 내용 */
  private String content;

  /** 조회수 */
	private int hit;
}
```

## Mapper 생성

```java
// NoticeMapper.java
public interface NoticeMapper {

  public List<Notice> getListWithPaging(Pagination pagination);
}
```

## 쿼리 작성

CDATA 태크는 XML 에서 부등호를 사용하기 위함입니다.

```xml
<select id="getListWithPaging" resultType="Notice" parameterType="Pagination">
  <![CDATA[
    SELECT USER_NAME, TITLE, CONTENT
    FROM
    (
      SELECT *, rownum
      FROM TB_NOTICE
    ) T
  ]]>
</select>
```

# 조회 조건 추가

위의 기본 페이징 형식에서 조회 조건을 추가하였습니다.

## 조회 조건 Class 생성

```java
// SearchParam.java
@Data
public class SearchParam extends Pagination {

  /** 작성사용자명 */
  private String userName;

  /** 제목 */
  private String title;

  /** 내용 */
  private String content;
}
```

## Mapper 수정

```java
// NoticeMapper.java
public interface NoticeMapper {

  public List<Notice> getListWithPaging(Pagination pagination);

  /** 조회조건을 통해 조회 */
  public List<Notice> getListWithCondition(SearchParam searchParam);
}
```

## 조회 쿼리 추가

```xml
<select id="getListWithCondition" resultType="Notice" parameterType="SearchParam">
  SELECT USER_NAME, TITLE, CONTENT
  FROM
  (
    SELECT *, rownum
    FROM TB_NOTICE
  ) T
  <![CDATA[
  ]]>
</select>
```

## 조회 테스트

```java
// NoticeServiceTest.java
@SpringBootTest
public class NoticeServiceTest {

  @Autowired
  private NoticeMapper noticeMapper;

  @Test
  public void getList() {

  }
}
```
