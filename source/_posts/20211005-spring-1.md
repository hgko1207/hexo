---
title: '[Spring] RestTemplate 사용방법'
categories:
  - Programming
  - Spring Framework
tags:
  - Spring Framework
  - REST API
  - RestTemplate
date: 2021-10-05 23:08:03
thumbnail: /images/thumbnail/spring.png
---

Spring 3.0 부터 지원하는 RestTemplate 를 사용한 REST API 호출 방법을 정리하였습니다.

# RestTemplate 란

Spring 에서 제공하는 HTTP Client 로 HTTP 통신에 유용하게 쓸 수 있는 템플릿이며, HTTP 서버와의 통신을 단순화하고 RESTful 원칙을 지킵니다.

# 설정

pom.xml 에 package 를 추가합니다.

```xml
<dependency>
  <groupId></groupId>
  <artifactId></artifactId>
</dependency>
```

```java
@Configuration
public class WebConfig() {

  @bean
  public void RestTemplateConfig() {
    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();
            factory.setConnectTimeout(5000); //타임아웃 설정 5초
            factory.setReadTimeout(5000);//타임아웃 설정 5초
            RestTemplate restTemplate = new RestTemplate(factory);
  }
}
```

# 사용

## GET

```java
public Object get() {
  try {
    HttpHeaders header = new HttpHeaders();
    HttpEntity<?> entity = new HttpEntity<>(header);

    String url = "http://localhost:8080/movies";
    UriComponents uri = UriComponentsBuilder.fromHttpUrl(url+"?"+"key=ttt&targetDt=20120101").build();

    RestTemplate restTemplate = new RestTemplate();
    ResponseEntity<Map> = restTemplate.exchange(uri.toString(), HttpMethod.GET, entity, Map.class);

    System.out.println("statusCode => " + resultMap.getStatusCodeValue()); //http status code를 확인
    System.out.println("header => " + resultMap.getHeaders()); //헤더 정보 확인
    System.out.println("body => " + resultMap.getBody()); //실제 데이터 정보 확인
  } catch (HttpClientErrorException | HttpServerErrorException e) {
    System.out.println("statusCode => " + e.getRawStatusCode());
    System.out.println("body => " + e.getStatusText());
    System.out.println(e.toString());
  } catch (Exception e) {
    System.out.println(e.toString());
  }
}
```

## POST

```java
public Object post() {
  RestTemplate restTemplate = new RestTemplate();
}
```

## PUT

```java
public Object put() {
  RestTemplate restTemplate = new RestTemplate();
}
```

## DELETE

```java
public Object delete() {
  RestTemplate restTemplate = new RestTemplate();

}
```

# 참고

- https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html
